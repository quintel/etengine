<%
  key     ||= @key
  result  ||= @result
  present = result.first.last.round(3)
  future  = result.last.last.round(3)
  delta   = (future - present).round(1)
  change  = (((future / present) - 1.0) * 100.0).round(0)
  # WHITESPACE is significant to have nice output
%>

    it "<%= key %>" do
      the_present.should be_within(<%= present %>, some_tolerance)
      the_future.should  be_within(<%= future %>, some_tolerance)
      the_relative_increase.should be_within(<%= change %>, some_tolerance)
      the_absolute_increase.should be_within(<%= delta  %>, some_tolerance)
    end