<% if result.is_a?(Array) 
  present = result.first.last #.round(3) rescue nil
  future  = result.last.last #.round(3) rescue nil
  delta   = (future - present).round(1).rescue_nan rescue nil
  change  = (((future / present) - 1.0) * 100.0).round(1).rescue_nan rescue nil
  # WHITESPACE is significant for nice output
%>

    it "<%= key %>" do
      the_present.should be_within(<%= present.round(MechanicalTurk::ROUNDING) rescue 'nil' %>, some_tolerance)
      the_future.should  be_within(<%= future.round(MechanicalTurk::ROUNDING) rescue 'nil' %>, some_tolerance)
      the_relative_increase.should be_within(<%= change.inspect %>, some_tolerance)
      the_absolute_increase.should be_within(<%= delta.inspect  %>, some_tolerance)
    end

<% else %>

    it "<%= key %>" do
      the_value.should be_within(<%= result.round(MechanicalTurk::ROUNDING) rescue 'nil' %>, some_tolerance)
    end

<% end %>
